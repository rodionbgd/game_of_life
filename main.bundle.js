!function(){"use strict";var e={};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function i(e,t){for(var i=0;i<t.length;i++){var l=t[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var r=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"ALIVE",1),l(this,"DEAD",0),l(this,"SPEED",50),l(this,"RESIZE_MODE",0),l(this,"PLAY_MODE",1),l(this,"NEXT_MODE",2),l(this,"RAND_MODE",3),l(this,"SPEED_MODE",4),this.gameField=t.gameField,this.startBtn=t.startBtn,this.widthElem=t.widthElem,this.heightElem=t.heightElem,this.width=Number(t.widthElem.value)<Number(t.widthElem.min)?Number(t.widthElem.min):Number(t.widthElem.value),this.height=Number(t.heightElem.value)<Number(t.heightElem.min)?Number(t.heightElem.min):Number(t.heightElem.value),this.slider=t.slider,this.allCells=Array.from(Array(this.height),(function(){return new Array(i.width).fill(i.DEAD)})),this.inactiveArr=JSON.parse(JSON.stringify(this.allCells)),this.interval=null,this.aliveCellNumber=0,this.lastSpeed=this.slider.value}var t,r;return t=e,r=[{key:"generateField",value:function(e){if(e!==this.RAND_MODE){for(var t=document.createElement("tbody"),i=0;i<this.height;i+=1){for(var l=document.createElement("tr"),r=0;r<this.width;r+=1){var n=this.createCell(i,r);l.append(n)}t.append(l)}this.gameField.append(t)}else{this.aliveCellNumber=0;for(var a=0;a<this.height;a+=1)for(var s=0;s<this.width;s+=1)Math.round(Math.random())?(this.gameField.rows[a].cells[s].classList.add("alive"),this.allCells[a][s]=this.ALIVE,this.aliveCellNumber+=1):(this.gameField.rows[a].cells[s].classList.remove("alive"),this.allCells[a][s]=this.DEAD)}}},{key:"draw",value:function(e){var t=e.target;if("td"===t.tagName.toLowerCase()){var i=t.className,l=+t.dataset.row,r=+t.dataset.col;~i.indexOf("alive")?(t.classList.toggle("alive"),this.allCells[l][r]=this.allCells[l][r]?this.DEAD:this.ALIVE,this.allCells[l][r]===this.DEAD&&(this.aliveCellNumber-=1)):(t.classList.add("alive"),this.allCells[l][r]=this.ALIVE,this.aliveCellNumber+=1),console.log(this.aliveCellNumber)}}},{key:"countNeighbours",value:function(e,t){for(var i=0,l=-1;l<2;l+=1)for(var r=-1;r<2;r+=1)if(l||r){try{this.allCells[e+l][t+r]===this.ALIVE&&(i+=1)}catch(e){}if(i>3)return i}return i}},{key:"updateCellValue",value:function(e,t){var i=this.countNeighbours(e,t);return i>3||i<2?this.DEAD:this.allCells[e][t]===this.DEAD&&3===i?this.ALIVE:this.allCells[e][t]}},{key:"createCell",value:function(e,t){var i=document.createElement("td");return i.dataset.row="".concat(e),i.dataset.col="".concat(t),i.className="c c".concat(Math.floor(4*Math.random()+1)),i}},{key:"renderField",value:function(e,t){var i=this;if(!Number.isNaN(e)&&!Number.isNaN(t)){if(this.height<e){var l=Array.from(Array(e-this.height),(function(){return new Array(i.width).fill(i.DEAD)}));this.allCells=this.allCells.concat(l),this.inactiveArr=this.inactiveArr.concat(l);for(var r=this.height;r<e;r+=1){for(var n=document.createElement("tr"),a=0;a<this.width;a+=1){var s=this.createCell(r,a);n.append(s)}this.gameField.tBodies[0].append(n)}this.height=e}else if(this.height>e){for(var h=0;h<this.height-e;h+=1)this.aliveCellNumber-=this.allCells[e].filter((function(e){return e===i.ALIVE})).length,this.gameField.rows[e].remove();this.allCells.splice(e,this.height-e),this.inactiveArr.splice(e,this.height-e),this.height=e}if(this.width<t){var o=new Array(t-this.width).fill(this.DEAD);this.allCells=this.allCells.map((function(e){return e.concat(o)})),this.inactiveArr=this.inactiveArr.map((function(e){return e.concat(o)}));for(var c=0;c<this.height;c+=1)for(var u=this.width;u<t;u+=1){var d=this.createCell(c,u);this.gameField.rows[c].append(d)}this.width=t}else if(this.width>t){this.allCells.forEach((function(e){i.aliveCellNumber-=e[e.length-1],e.splice(t,i.width-t)})),this.inactiveArr.forEach((function(e){e.splice(t,i.width-t)}));for(var v=0;v<this.height;v+=1)for(var E=t;E<this.width;E+=1)this.gameField.rows[v].lastChild.remove();this.width=t}}}},{key:"setHeight",value:function(){Number(this.heightElem.value)<Number(this.heightElem.min)&&(this.heightElem.value=this.heightElem.min),this.renderField(Number(this.heightElem.value),this.width)}},{key:"setWidth",value:function(){Number(this.widthElem.value)<Number(this.widthElem.min)&&(this.widthElem.value=this.widthElem.min),this.renderField(this.height,Number(this.widthElem.value))}},{key:"updateGameField",value:function(e){var t=this;if(e!==this.NEXT_MODE&&this.lastSpeed!==this.slider.value)return this.lastSpeed=this.slider.value,clearInterval(this.interval),void this.lifeCycle(this.SPEED_MODE,100-this.lastSpeed);for(var i=0;i<this.height;i+=1)for(var l=function(l){var r=t.allCells[i][l]===t.ALIVE?t.ALIVE:t.DEAD;t.inactiveArr[i][l]=t.updateCellValue(i,l);var n=t.gameField.rows[i].cells[l];if(t.inactiveArr[i][l]!==r){var a="";t.inactiveArr[i][l]===t.ALIVE?(e===t.NEXT_MODE&&(a="new-alive"),t.aliveCellNumber+=1):(e===t.NEXT_MODE&&(a="new-dead"),t.aliveCellNumber-=1),e===t.NEXT_MODE&&(n.classList.add(a),setTimeout((function(){return n.classList.remove(a)}),1e3)),n.classList.toggle("alive")}},r=0;r<this.width;r+=1)l(r);this.allCells=JSON.parse(JSON.stringify(this.inactiveArr)),this.aliveCellNumber||(clearInterval(this.interval),this.startBtn.innerHTML="start")}},{key:"lifeCycle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.PLAY_MODE;if(arguments.length>1&&void 0!==arguments[1]||this.SPEED,!this.aliveCellNumber)return clearInterval(this.interval),void(this.startBtn.innerHTML="start");if(e!==this.RESIZE_MODE||"start"!==this.startBtn.innerHTML){if("stop"===this.startBtn.innerHTML&&e===this.PLAY_MODE)return clearInterval(this.interval),void(this.startBtn.innerHTML="start");if(this.startBtn.innerHTML="stop",e===this.NEXT_MODE)return this.startBtn.innerHTML="start",clearInterval(this.interval),void this.updateGameField.call(this,this.NEXT_MODE);this.interval=setInterval(this.updateGameField.bind(this),10*(100-this.lastSpeed))}}}],r&&i(t.prototype,r),e}(),n=document.getElementById("gamefield"),a=document.getElementById("start"),s=document.getElementById("random"),h=document.getElementById("next"),o=document.getElementById("width"),c=document.getElementById("height"),u=document.getElementById("slider");y("slider").value=y("slider").getAttribute("value");var d=new(y("GameOfLife"))({widthElem:y("widthElem"),heightElem:y("heightElem"),startBtn:y("startBtn"),gameField:y("gameField"),slider:y("slider")});function v(){try{if(e.g)return e.g}catch(e){try{if(window)return window}catch(e){return this}}}y("gol").generateField(),y("gameField").addEventListener("click",y("gol").draw.bind(y("gol"))),y("widthElem").addEventListener("input",y("gol").setWidth.bind(y("gol"))),y("heightElem").addEventListener("click",y("gol").setHeight.bind(y("gol"))),y("startBtn").addEventListener("click",y("gol").lifeCycle.bind(y("gol"),y("gol").PLAY_MODE)),y("randomBtn").addEventListener("click",y("gol").generateField.bind(y("gol"),y("gol").RAND_MODE)),y("nextBtn").addEventListener("click",y("gol").lifeCycle.bind(y("gol"),y("gol").NEXT_MODE)),y("slider").addEventListener("input",(function(){var e=document.getElementById("tooltip");e.textContent=y("slider").value,Number(y("slider").value)>50?e.style.setProperty("left","calc(".concat(y("slider").value,"%  - ").concat(Number(y("slider").value)/100*9/2+e.clientWidth/2,"px)")):e.style.setProperty("left","calc(".concat(y("slider").value,"%  - ").concat(e.clientWidth/2-9*(.5-Number(y("slider").value)/50)/2,"px)"))}));var E,m=null;function f(){if(null===m){var e=v();e.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__||(e.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__=0),m=__$$GLOBAL_REWIRE_NEXT_MODULE_ID__++}return m}function _(){var e=v();return e.__$$GLOBAL_REWIRE_REGISTRY__||(e.__$$GLOBAL_REWIRE_REGISTRY__=Object.create(null)),e.__$$GLOBAL_REWIRE_REGISTRY__}function g(){var e=f(),t=_(),i=t[e];return i||(t[e]=Object.create(null),i=t[e]),i}(E=v()).__rewire_reset_all__||(E.__rewire_reset_all__=function(){E.__$$GLOBAL_REWIRE_REGISTRY__=Object.create(null)});var b="__INTENTIONAL_UNDEFINED__",w={};function y(e){var t=g();if(void 0===t[e])return function(e){switch(e){case"slider":return u;case"GameOfLife":return r;case"widthElem":return o;case"heightElem":return c;case"startBtn":return a;case"gameField":return n;case"gol":return d;case"randomBtn":return s;case"nextBtn":return h}}(e);var i=t[e];return i===b?void 0:i}function N(e,i){var l=g();return"object"===t(e)?(Object.keys(e).forEach((function(t){l[t]=e[t]})),function(){Object.keys(e).forEach((function(t){p(e)}))}):(l[e]=void 0===i?b:i,function(){p(e)})}function p(e){var t=g();delete t[e],0==Object.keys(t).length&&delete _()[f]}function D(e){var t=g(),i=Object.keys(e),l={};function r(){i.forEach((function(e){t[e]=l[e]}))}return function(n){i.forEach((function(i){l[i]=t[i],t[i]=e[i]}));var a=n();return a&&"function"==typeof a.then?a.then(r).catch(r):r(),a}}!function(){function e(e,t){Object.defineProperty(w,e,{value:t,enumerable:!1,configurable:!0})}e("__get__",y),e("__GetDependency__",y),e("__Rewire__",N),e("__set__",N),e("__reset__",p),e("__ResetDependency__",p),e("__with__",D)}()}();