!function(){"use strict";var e={};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var l={ALIVE:1,DEAD:0,SPEED:50,RESIZE_MODE:0,PLAY_MODE:1,NEXT_MODE:2,RAND_MODE:3,SPEED_MODE:4},a=function(){function e(t){var n=this;i(this,e),this.gameField=t.elem,this.height=t.height,this.width=t.width,this.allCells=Array.from(Array(this.height),(function(){return new Array(n.width).fill(E("constants").DEAD)})),this.aliveCellNumber=0}return r(e,[{key:"generateRandField",value:function(e,t,i){this.allCells=JSON.parse(JSON.stringify(i)),this.aliveCellNumber=0;for(var n=0;n<e;n+=1)for(var r=0;r<t;r+=1)Math.round(Math.random())?(this.gameField.rows[n].cells[r].classList.add("alive"),this.allCells[n][r]=E("constants").ALIVE,this.aliveCellNumber+=1):(this.gameField.rows[n].cells[r].classList.remove("alive"),this.allCells[n][r]=E("constants").DEAD);return{gameField:this.gameField,allCells:this.allCells,aliveCellNumber:this.aliveCellNumber}}},{key:"generateField",value:function(){for(var e=document.createElement("tbody"),t=0;t<this.height;t+=1){for(var i=document.createElement("tr"),n=0;n<this.width;n+=1){var r=this.createCell(t,n);i.append(r)}e.append(i)}return this.gameField.append(e),{gameField:this.gameField,allCells:this.allCells,aliveCellNumber:this.aliveCellNumber}}},{key:"createCell",value:function(e,t){var i=document.createElement("td");return i.dataset.row="".concat(e),i.dataset.col="".concat(t),i.className="c c".concat(Math.floor(4*Math.random()+1)),i}}]),e}();function s(){try{if(e.g)return e.g}catch(e){try{if(window)return window}catch(e){return this}}}var c,_=null;function h(){if(null===_){var e=s();e.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__||(e.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__=0),_=__$$GLOBAL_REWIRE_NEXT_MODULE_ID__++}return _}function o(){var e=s();return e.__$$GLOBAL_REWIRE_REGISTRY__||(e.__$$GLOBAL_REWIRE_REGISTRY__=Object.create(null)),e.__$$GLOBAL_REWIRE_REGISTRY__}function u(){var e=h(),t=o(),i=t[e];return i||(t[e]=Object.create(null),i=t[e]),i}(c=s()).__rewire_reset_all__||(c.__rewire_reset_all__=function(){c.__$$GLOBAL_REWIRE_REGISTRY__=Object.create(null)});var d="__INTENTIONAL_UNDEFINED__",f={};function E(e){var t=u();if(void 0===t[e])return function(e){if("constants"===e)return l}(e);var i=t[e];return i===d?void 0:i}function v(e,i){var n=u();return"object"===t(e)?(Object.keys(e).forEach((function(t){n[t]=e[t]})),function(){Object.keys(e).forEach((function(t){m(e)}))}):(n[e]=void 0===i?d:i,function(){m(e)})}function m(e){var t=u();delete t[e],0==Object.keys(t).length&&delete o()[h]}function g(e){var t=u(),i=Object.keys(e),n={};function r(){i.forEach((function(e){t[e]=n[e]}))}return function(l){i.forEach((function(i){n[i]=t[i],t[i]=e[i]}));var a=l();return a&&"function"==typeof a.then?a.then(r).catch(r):r(),a}}!function(){function e(e,t){Object.defineProperty(f,e,{value:t,enumerable:!1,configurable:!0})}e("__get__",E),e("__GetDependency__",E),e("__Rewire__",v),e("__set__",v),e("__reset__",m),e("__ResetDependency__",m),e("__with__",g)}();var b=t(a);function y(e,t){Object.defineProperty(a,e,{value:t,enumerable:!1,configurable:!0})}"object"!==b&&"function"!==b||!Object.isExtensible(a)||(y("__get__",E),y("__GetDependency__",E),y("__Rewire__",v),y("__set__",v),y("__reset__",m),y("__ResetDependency__",m),y("__with__",g),y("__RewireAPI__",f));var w=function(){function e(t){i(this,e),this.startBtn=t.startBtn,this.widthElem=t.widthElem,this.heightElem=t.heightElem,this.width=Number(t.widthElem.value)<Number(t.widthElem.min)?Number(t.widthElem.min):Number(t.widthElem.value),this.height=Number(t.heightElem.value)<Number(t.heightElem.min)?Number(t.heightElem.min):Number(t.heightElem.value),this.slider=t.slider,this.gameFieldRender=new(A("Gamefield"))({elem:t.gameField,width:this.width,height:this.height});var n=this.gameFieldRender.generateField();this.interval=null,this.gameField=n.gameField,this.allCells=n.allCells,this.inactiveArr=JSON.parse(JSON.stringify(this.allCells)),this.aliveCellNumber=n.aliveCellNumber,this.lastSpeed=this.slider.value}return r(e,[{key:"generateRandField",value:function(){var e=this.gameFieldRender.generateRandField(this.height,this.width,this.allCells);this.gameField=e.gameField,this.allCells=e.allCells,this.inactiveArr=JSON.parse(JSON.stringify(this.allCells)),this.aliveCellNumber=e.aliveCellNumber}},{key:"draw",value:function(e){var t=e.target;if("td"===t.tagName.toLowerCase()){var i=t.className,n=+t.dataset.row,r=+t.dataset.col;-1===i.indexOf("alive")?(t.classList.add("alive"),this.allCells[n][r]=A("constants").ALIVE,this.aliveCellNumber+=1):(t.classList.toggle("alive"),this.allCells[n][r]=this.allCells[n][r]?A("constants").DEAD:A("constants").ALIVE,this.allCells[n][r]===A("constants").DEAD&&(this.aliveCellNumber-=1))}}},{key:"countNeighbours",value:function(e,t){for(var i=0,n=-1;n<2;n+=1)for(var r=-1;r<2;r+=1)if(n||r){try{this.allCells[e+n][t+r]===A("constants").ALIVE&&(i+=1)}catch(e){continue}if(i>3)return i}return i}},{key:"updateCellValue",value:function(e,t){var i=this.countNeighbours(e,t);return i>3||i<2?A("constants").DEAD:this.allCells[e][t]===A("constants").DEAD&&3===i?A("constants").ALIVE:this.allCells[e][t]}},{key:"renderField",value:function(e,t){var i=this;if(!Number.isNaN(e)&&!Number.isNaN(t)){if(this.height<e){var n=Array.from(Array(e-this.height),(function(){return new Array(i.width).fill(A("constants").DEAD)}));this.allCells=this.allCells.concat(n),this.inactiveArr=this.inactiveArr.concat(n);for(var r=this.height;r<e;r+=1){for(var l=document.createElement("tr"),a=0;a<this.width;a+=1){var s=this.gameFieldRender.createCell(r,a);l.append(s)}this.gameField.tBodies[0].append(l)}this.height=e}else if(this.height>e){for(var c=0;c<this.height-e;c+=1)this.aliveCellNumber-=this.allCells[e].filter((function(e){return e===A("constants").ALIVE})).length,this.gameField.rows[e].remove();this.allCells.splice(e,this.height-e),this.inactiveArr.splice(e,this.height-e),this.height=e}if(this.width<t){var _=new Array(t-this.width).fill(A("constants").DEAD);this.allCells=this.allCells.map((function(e){return e.concat(_)})),this.inactiveArr=this.inactiveArr.map((function(e){return e.concat(_)}));for(var h=0;h<this.height;h+=1)for(var o=this.width;o<t;o+=1){var u=this.gameFieldRender.createCell(h,o);this.gameField.rows[h].append(u)}this.width=t}else if(this.width>t){this.allCells.forEach((function(e){i.aliveCellNumber-=e[e.length-1],e.splice(t,i.width-t)})),this.inactiveArr.forEach((function(e){e.splice(t,i.width-t)}));for(var d=0;d<this.height;d+=1)for(var f=t;f<this.width;f+=1)this.gameField.rows[d].lastChild.remove();this.width=t}}}},{key:"setHeight",value:function(){Number(this.heightElem.value)<Number(this.heightElem.min)&&(this.heightElem.value=this.heightElem.min),this.renderField(Number(this.heightElem.value),this.width)}},{key:"setWidth",value:function(){Number(this.widthElem.value)<Number(this.widthElem.min)&&(this.widthElem.value=this.widthElem.min),this.renderField(this.height,Number(this.widthElem.value))}},{key:"updateGameField",value:function(e){var t=this;if(e!==A("constants").NEXT_MODE&&this.lastSpeed!==this.slider.value)return this.lastSpeed=this.slider.value,clearInterval(this.interval),void this.lifeCycle(A("constants").SPEED_MODE,100-this.lastSpeed);for(var i=0;i<this.height;i+=1)for(var n=function(n){var r=t.allCells[i][n]===A("constants").ALIVE?A("constants").ALIVE:A("constants").DEAD;t.inactiveArr[i][n]=t.updateCellValue(i,n);var l=t.gameField.rows[i].cells[n];if(t.inactiveArr[i][n]!==r){var a="";t.inactiveArr[i][n]===A("constants").ALIVE?(e===A("constants").NEXT_MODE&&(a="new-alive"),t.aliveCellNumber+=1):(e===A("constants").NEXT_MODE&&(a="new-dead"),t.aliveCellNumber-=1),e===A("constants").NEXT_MODE&&(l.classList.add(a),setTimeout((function(){return l.classList.remove(a)}),1e3)),l.classList.toggle("alive")}},r=0;r<this.width;r+=1)n(r);this.allCells=JSON.parse(JSON.stringify(this.inactiveArr)),this.aliveCellNumber||(clearInterval(this.interval),this.startBtn.innerHTML="start")}},{key:"lifeCycle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A("constants").PLAY_MODE;if(!this.aliveCellNumber)return clearInterval(this.interval),void(this.startBtn.innerHTML="start");if(e!==A("constants").RESIZE_MODE||"start"!==this.startBtn.innerHTML){if("stop"===this.startBtn.innerHTML&&e===A("constants").PLAY_MODE)return clearInterval(this.interval),void(this.startBtn.innerHTML="start");if(this.startBtn.innerHTML="stop",e===A("constants").NEXT_MODE)return this.startBtn.innerHTML="start",clearInterval(this.interval),void this.updateGameField.call(this,A("constants").NEXT_MODE);this.interval=setInterval(this.updateGameField.bind(this),10*(100-this.lastSpeed))}}}]),e}();function L(){try{if(e.g)return e.g}catch(e){try{if(window)return window}catch(e){return this}}}var O=null;function R(){if(null===O){var e=L();e.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__||(e.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__=0),O=__$$GLOBAL_REWIRE_NEXT_MODULE_ID__++}return O}function N(){var e=L();return e.__$$GLOBAL_REWIRE_REGISTRY__||(e.__$$GLOBAL_REWIRE_REGISTRY__=Object.create(null)),e.__$$GLOBAL_REWIRE_REGISTRY__}function I(){var e=R(),t=N(),i=t[e];return i||(t[e]=Object.create(null),i=t[e]),i}!function(){var e=L();e.__rewire_reset_all__||(e.__rewire_reset_all__=function(){e.__$$GLOBAL_REWIRE_REGISTRY__=Object.create(null)})}();var D="__INTENTIONAL_UNDEFINED__",p={};function A(e){var t=I();if(void 0===t[e])return function(e){switch(e){case"Gamefield":return a;case"constants":return l}}(e);var i=t[e];return i===D?void 0:i}function C(e,i){var n=I();return"object"===t(e)?(Object.keys(e).forEach((function(t){n[t]=e[t]})),function(){Object.keys(e).forEach((function(t){B(e)}))}):(n[e]=void 0===i?D:i,function(){B(e)})}function B(e){var t=I();delete t[e],0==Object.keys(t).length&&delete N()[R]}function T(e){var t=I(),i=Object.keys(e),n={};function r(){i.forEach((function(e){t[e]=n[e]}))}return function(l){i.forEach((function(i){n[i]=t[i],t[i]=e[i]}));var a=l();return a&&"function"==typeof a.then?a.then(r).catch(r):r(),a}}!function(){function e(e,t){Object.defineProperty(p,e,{value:t,enumerable:!1,configurable:!0})}e("__get__",A),e("__GetDependency__",A),e("__Rewire__",C),e("__set__",C),e("__reset__",B),e("__ResetDependency__",B),e("__with__",T)}();var G=t(w);function F(e,t){Object.defineProperty(w,e,{value:t,enumerable:!1,configurable:!0})}"object"!==G&&"function"!==G||!Object.isExtensible(w)||(F("__get__",A),F("__GetDependency__",A),F("__Rewire__",C),F("__set__",C),F("__reset__",B),F("__ResetDependency__",B),F("__with__",T),F("__RewireAPI__",p));var $=document.getElementById("gamefield"),M=document.getElementById("start"),j=document.getElementById("random"),S=document.getElementById("next"),k=document.getElementById("width"),W=document.getElementById("height"),P=document.getElementById("slider");q("slider").value=q("slider").getAttribute("value");var X=new(q("GameOfLife"))({widthElem:q("widthElem"),heightElem:q("heightElem"),startBtn:q("startBtn"),gameField:q("gameField"),slider:q("slider")});function Y(){try{if(e.g)return e.g}catch(e){try{if(window)return window}catch(e){return this}}}q("gameField").addEventListener("click",q("gol").draw.bind(q("gol"))),q("widthElem").addEventListener("input",q("gol").setWidth.bind(q("gol"))),q("heightElem").addEventListener("click",q("gol").setHeight.bind(q("gol"))),q("startBtn").addEventListener("click",q("gol").lifeCycle.bind(q("gol"),q("constants").PLAY_MODE)),q("randomBtn").addEventListener("click",q("gol").generateRandField.bind(q("gol"))),q("nextBtn").addEventListener("click",q("gol").lifeCycle.bind(q("gol"),q("constants").NEXT_MODE)),q("slider").addEventListener("input",(function(){var e=document.getElementById("tooltip");e.textContent=q("slider").value,Number(q("slider").value)>50?e.style.setProperty("left","calc(".concat(q("slider").value,"%  - ").concat(Number(q("slider").value)/100*9/2+e.clientWidth/2,"px)")):e.style.setProperty("left","calc(".concat(q("slider").value,"%  - ").concat(e.clientWidth/2-9*(.5-Number(q("slider").value)/50)/2,"px)"))}));var U=null;function V(){if(null===U){var e=Y();e.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__||(e.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__=0),U=__$$GLOBAL_REWIRE_NEXT_MODULE_ID__++}return U}function x(){var e=Y();return e.__$$GLOBAL_REWIRE_REGISTRY__||(e.__$$GLOBAL_REWIRE_REGISTRY__=Object.create(null)),e.__$$GLOBAL_REWIRE_REGISTRY__}function H(){var e=V(),t=x(),i=t[e];return i||(t[e]=Object.create(null),i=t[e]),i}!function(){var e=Y();e.__rewire_reset_all__||(e.__rewire_reset_all__=function(){e.__$$GLOBAL_REWIRE_REGISTRY__=Object.create(null)})}();var J="__INTENTIONAL_UNDEFINED__",Z={};function q(e){var t=H();if(void 0===t[e])return function(e){switch(e){case"slider":return P;case"GameOfLife":return w;case"widthElem":return k;case"heightElem":return W;case"startBtn":return M;case"gameField":return $;case"gol":return X;case"constants":return l;case"randomBtn":return j;case"nextBtn":return S}}(e);var i=t[e];return i===J?void 0:i}function z(e,i){var n=H();return"object"===t(e)?(Object.keys(e).forEach((function(t){n[t]=e[t]})),function(){Object.keys(e).forEach((function(t){K(e)}))}):(n[e]=void 0===i?J:i,function(){K(e)})}function K(e){var t=H();delete t[e],0==Object.keys(t).length&&delete x()[V]}function Q(e){var t=H(),i=Object.keys(e),n={};function r(){i.forEach((function(e){t[e]=n[e]}))}return function(l){i.forEach((function(i){n[i]=t[i],t[i]=e[i]}));var a=l();return a&&"function"==typeof a.then?a.then(r).catch(r):r(),a}}!function(){function e(e,t){Object.defineProperty(Z,e,{value:t,enumerable:!1,configurable:!0})}e("__get__",q),e("__GetDependency__",q),e("__Rewire__",z),e("__set__",z),e("__reset__",K),e("__ResetDependency__",K),e("__with__",Q)}()}();