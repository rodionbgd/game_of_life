!function(){"use strict";var e={};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var l={ALIVE:1,DEAD:0,SPEED:50,RESIZE_MODE:0,PLAY_MODE:1,NEXT_MODE:2,RAND_MODE:3,SPEED_MODE:4},a=function(){function e(t){var n=this;i(this,e),this.gameField=t.elem,this.height=t.height,this.width=t.width,this.allCells=Array.from(Array(this.height),(function(){return new Array(n.width).fill(v("constants").DEAD)})),this.aliveCellNumber=0}return r(e,[{key:"generateRandField",value:function(e,t,i){this.allCells=JSON.parse(JSON.stringify(i)),this.aliveCellNumber=0;for(var n=0;n<e;n+=1)for(var r=0;r<t;r+=1)Math.round(Math.random())?(this.gameField.rows[n].cells[r].classList.add("alive"),this.allCells[n][r]=v("constants").ALIVE,this.aliveCellNumber+=1):(this.gameField.rows[n].cells[r].classList.remove("alive"),this.allCells[n][r]=v("constants").DEAD);return{gameField:this.gameField,allCells:this.allCells,aliveCellNumber:this.aliveCellNumber}}},{key:"generateField",value:function(){for(var e=document.createElement("tbody"),t=0;t<this.height;t+=1){for(var i=document.createElement("tr"),n=0;n<this.width;n+=1){var r=this.createCell(t,n);i.append(r)}e.append(i)}return this.gameField.append(e),{gameField:this.gameField,allCells:this.allCells,aliveCellNumber:this.aliveCellNumber}}},{key:"createCell",value:function(e,t){var i=document.createElement("td");return i.dataset.row="".concat(e),i.dataset.col="".concat(t),i.className="c c".concat(Math.floor(4*Math.random()+1)),i}}]),e}();function s(){try{if(e.g)return e.g}catch(e){try{if(window)return window}catch(e){return this}}}var _,c=null;function u(){if(null===c){var e=s();e.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__||(e.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__=0),c=__$$GLOBAL_REWIRE_NEXT_MODULE_ID__++}return c}function h(){var e=s();return e.__$$GLOBAL_REWIRE_REGISTRY__||(e.__$$GLOBAL_REWIRE_REGISTRY__=Object.create(null)),e.__$$GLOBAL_REWIRE_REGISTRY__}function o(){var e=u(),t=h(),i=t[e];return i||(t[e]=Object.create(null),i=t[e]),i}(_=s()).__rewire_reset_all__||(_.__rewire_reset_all__=function(){_.__$$GLOBAL_REWIRE_REGISTRY__=Object.create(null)});var d="__INTENTIONAL_UNDEFINED__",f={};function v(e){var t=o();if(void 0===t[e])return function(e){if("constants"===e)return l}(e);var i=t[e];return i===d?void 0:i}function E(e,i){var n=o();return"object"===t(e)?(Object.keys(e).forEach((function(t){n[t]=e[t]})),function(){Object.keys(e).forEach((function(t){m(e)}))}):(n[e]=void 0===i?d:i,function(){m(e)})}function m(e){var t=o();delete t[e],0==Object.keys(t).length&&delete h()[u]}function b(e){var t=o(),i=Object.keys(e),n={};function r(){i.forEach((function(e){t[e]=n[e]}))}return function(l){i.forEach((function(i){n[i]=t[i],t[i]=e[i]}));var a=l();return a&&"function"==typeof a.then?a.then(r).catch(r):r(),a}}!function(){function e(e,t){Object.defineProperty(f,e,{value:t,enumerable:!1,configurable:!0})}e("__get__",v),e("__GetDependency__",v),e("__Rewire__",E),e("__set__",E),e("__reset__",m),e("__ResetDependency__",m),e("__with__",b)}();var g=t(a);function y(e,t){Object.defineProperty(a,e,{value:t,enumerable:!1,configurable:!0})}"object"!==g&&"function"!==g||!Object.isExtensible(a)||(y("__get__",v),y("__GetDependency__",v),y("__Rewire__",E),y("__set__",E),y("__reset__",m),y("__ResetDependency__",m),y("__with__",b),y("__RewireAPI__",f));var w=function(){function e(t){i(this,e),this.startBtn=t.startBtn,this.widthElem=t.widthElem,this.heightElem=t.heightElem,this.width=Number(t.widthElem.value)<Number(t.widthElem.min)?Number(t.widthElem.min):Number(t.widthElem.value),this.height=Number(t.heightElem.value)<Number(t.heightElem.min)?Number(t.heightElem.min):Number(t.heightElem.value),this.slider=t.slider,this.gameFieldRender=new(A("Gamefield"))({elem:t.gameField,width:this.width,height:this.height});var n=this.gameFieldRender.generateField();this.interval=null,this.gameField=n.gameField,this.allCells=n.allCells,this.inactiveArr=JSON.parse(JSON.stringify(this.allCells)),this.aliveCellNumber=n.aliveCellNumber,this.lastSpeed=this.slider.value}return r(e,[{key:"generateRandField",value:function(){var e=this.gameFieldRender.generateRandField(this.height,this.width,this.allCells);this.gameField=e.gameField,this.allCells=e.allCells,this.inactiveArr=JSON.parse(JSON.stringify(this.allCells)),this.aliveCellNumber=e.aliveCellNumber}},{key:"draw",value:function(e){var t=e.target;if("td"===t.tagName.toLowerCase()){var i=t.className,n=+t.dataset.row,r=+t.dataset.col;-1===i.indexOf("alive")?(t.classList.add("alive"),this.allCells[n][r]=A("constants").ALIVE,this.aliveCellNumber+=1):(t.classList.toggle("alive"),this.allCells[n][r]=this.allCells[n][r]?A("constants").DEAD:A("constants").ALIVE,this.allCells[n][r]===A("constants").DEAD&&(this.aliveCellNumber-=1))}}},{key:"countNeighbours",value:function(e,t){for(var i=0,n=-1;n<2;n+=1)for(var r=-1;r<2;r+=1)if(n||r){try{this.allCells[e+n][t+r]===A("constants").ALIVE&&(i+=1)}catch(e){continue}if(i>3)return i}return i}},{key:"updateCellValue",value:function(e,t){var i=this.countNeighbours(e,t);return i>3||i<2?A("constants").DEAD:this.allCells[e][t]===A("constants").DEAD&&3===i?A("constants").ALIVE:this.allCells[e][t]}},{key:"renderField",value:function(e,t){var i=this;if(!Number.isNaN(e)&&!Number.isNaN(t)){if(this.height<e){var n=Array.from(Array(e-this.height),(function(){return new Array(i.width).fill(A("constants").DEAD)}));this.allCells=this.allCells.concat(n),this.inactiveArr=this.inactiveArr.concat(n);for(var r=this.height;r<e;r+=1){for(var l=document.createElement("tr"),a=0;a<this.width;a+=1){var s=this.gameFieldRender.createCell(r,a);l.append(s)}this.gameField.tBodies[0].append(l)}this.height=e}else if(this.height>e){for(var _=0;_<this.height-e;_+=1)this.aliveCellNumber-=this.allCells[e].filter((function(e){return e===A("constants").ALIVE})).length,this.gameField.rows[e].remove();this.allCells.splice(e,this.height-e),this.inactiveArr.splice(e,this.height-e),this.height=e}if(this.width<t){var c=new Array(t-this.width).fill(A("constants").DEAD);this.allCells=this.allCells.map((function(e){return e.concat(c)})),this.inactiveArr=this.inactiveArr.map((function(e){return e.concat(c)}));for(var u=0;u<this.height;u+=1)for(var h=this.width;h<t;h+=1){var o=this.gameFieldRender.createCell(u,h);this.gameField.rows[u].append(o)}this.width=t}else if(this.width>t){this.allCells.forEach((function(e){i.aliveCellNumber-=e[e.length-1],e.splice(t,i.width-t)})),this.inactiveArr.forEach((function(e){e.splice(t,i.width-t)}));for(var d=0;d<this.height;d+=1)for(var f=t;f<this.width;f+=1)this.gameField.rows[d].lastChild.remove();this.width=t}}}},{key:"setHeight",value:function(){Number(this.heightElem.value)<Number(this.heightElem.min)&&(this.heightElem.value=this.heightElem.min),this.renderField(Number(this.heightElem.value),this.width)}},{key:"setWidth",value:function(){Number(this.widthElem.value)<Number(this.widthElem.min)&&(this.widthElem.value=this.widthElem.min),this.renderField(this.height,Number(this.widthElem.value))}},{key:"updateGameField",value:function(e){var t=this;if(e!==A("constants").NEXT_MODE&&this.lastSpeed!==Number(this.slider.value))return this.lastSpeed=Number(this.slider.value),clearInterval(this.interval),void this.lifeCycle(A("constants").SPEED_MODE,100-this.lastSpeed);for(var i=0;i<this.height;i+=1)for(var n=function(n){var r=t.allCells[i][n];t.inactiveArr[i][n]=t.updateCellValue(i,n);var l=t.gameField.rows[i].cells[n];if(t.inactiveArr[i][n]!==r){var a="";t.inactiveArr[i][n]===A("constants").ALIVE?(e===A("constants").NEXT_MODE&&(a="new-alive"),t.aliveCellNumber+=1):(e===A("constants").NEXT_MODE&&(a="new-dead"),t.aliveCellNumber-=1),e===A("constants").NEXT_MODE&&(l.classList.add(a),setTimeout((function(){return l.classList.remove(a)}),1e3)),l.classList.toggle("alive")}},r=0;r<this.width;r+=1)n(r);this.allCells=JSON.parse(JSON.stringify(this.inactiveArr)),this.aliveCellNumber||(clearInterval(this.interval),this.startBtn.innerHTML="start")}},{key:"lifeCycle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A("constants").PLAY_MODE;if(!this.aliveCellNumber)return clearInterval(this.interval),void(this.startBtn.innerHTML="start");if(e!==A("constants").RESIZE_MODE||"start"!==this.startBtn.innerHTML){if("stop"===this.startBtn.innerHTML&&e===A("constants").PLAY_MODE)return clearInterval(this.interval),void(this.startBtn.innerHTML="start");if(this.startBtn.innerHTML="stop",e===A("constants").NEXT_MODE)return this.startBtn.innerHTML="start",clearInterval(this.interval),void this.updateGameField.call(this,A("constants").NEXT_MODE);this.interval=setInterval(this.updateGameField.bind(this),10*(100-this.lastSpeed))}}}]),e}();function R(){try{if(e.g)return e.g}catch(e){try{if(window)return window}catch(e){return this}}}var O=null;function L(){if(null===O){var e=R();e.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__||(e.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__=0),O=__$$GLOBAL_REWIRE_NEXT_MODULE_ID__++}return O}function N(){var e=R();return e.__$$GLOBAL_REWIRE_REGISTRY__||(e.__$$GLOBAL_REWIRE_REGISTRY__=Object.create(null)),e.__$$GLOBAL_REWIRE_REGISTRY__}function I(){var e=L(),t=N(),i=t[e];return i||(t[e]=Object.create(null),i=t[e]),i}!function(){var e=R();e.__rewire_reset_all__||(e.__rewire_reset_all__=function(){e.__$$GLOBAL_REWIRE_REGISTRY__=Object.create(null)})}();var p="__INTENTIONAL_UNDEFINED__",D={};function A(e){var t=I();if(void 0===t[e])return function(e){switch(e){case"Gamefield":return a;case"constants":return l}}(e);var i=t[e];return i===p?void 0:i}function C(e,i){var n=I();return"object"===t(e)?(Object.keys(e).forEach((function(t){n[t]=e[t]})),function(){Object.keys(e).forEach((function(t){G(e)}))}):(n[e]=void 0===i?p:i,function(){G(e)})}function G(e){var t=I();delete t[e],0==Object.keys(t).length&&delete N()[L]}function T(e){var t=I(),i=Object.keys(e),n={};function r(){i.forEach((function(e){t[e]=n[e]}))}return function(l){i.forEach((function(i){n[i]=t[i],t[i]=e[i]}));var a=l();return a&&"function"==typeof a.then?a.then(r).catch(r):r(),a}}!function(){function e(e,t){Object.defineProperty(D,e,{value:t,enumerable:!1,configurable:!0})}e("__get__",A),e("__GetDependency__",A),e("__Rewire__",C),e("__set__",C),e("__reset__",G),e("__ResetDependency__",G),e("__with__",T)}();var $=t(w);function B(e,t){Object.defineProperty(w,e,{value:t,enumerable:!1,configurable:!0})}function F(){var e=document.getElementById("gamefield"),t=document.getElementById("start"),i=document.getElementById("random"),n=document.getElementById("next"),r=document.getElementById("width"),l=document.getElementById("height"),a=document.getElementById("slider"),s=document.getElementById("tooltip");if(e&&t&&i&&n&&r&&l&&a&&s){a.value=a.getAttribute("value");var _=new(Y("GameOfLife"))({widthElem:r,heightElem:l,startBtn:t,gameField:e,slider:a});e.addEventListener("click",_.draw.bind(_)),r.addEventListener("input",_.setWidth.bind(_)),l.addEventListener("input",_.setHeight.bind(_)),t.addEventListener("click",_.lifeCycle.bind(_,Y("constants").PLAY_MODE)),i.addEventListener("click",_.generateRandField.bind(_)),n.addEventListener("click",_.lifeCycle.bind(_,Y("constants").NEXT_MODE)),a.addEventListener("input",(function(){s.textContent=a.value,Number(a.value)>50?s.style.setProperty("left","calc(".concat(a.value,"%  - ").concat(Number(a.value)/100*9/2+s.clientWidth/2,"px)")):s.style.setProperty("left","calc(".concat(a.value,"%  - ").concat(s.clientWidth/2-9*(.5-Number(a.value)/50)/2,"px)"))}))}}function j(){try{if(e.g)return e.g}catch(e){try{if(window)return window}catch(e){return this}}}"object"!==$&&"function"!==$||!Object.isExtensible(w)||(B("__get__",A),B("__GetDependency__",A),B("__Rewire__",C),B("__set__",C),B("__reset__",G),B("__ResetDependency__",G),B("__with__",T),B("__RewireAPI__",D)),Y("init")();var M=null;function S(){if(null===M){var e=j();e.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__||(e.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__=0),M=__$$GLOBAL_REWIRE_NEXT_MODULE_ID__++}return M}function k(){var e=j();return e.__$$GLOBAL_REWIRE_REGISTRY__||(e.__$$GLOBAL_REWIRE_REGISTRY__=Object.create(null)),e.__$$GLOBAL_REWIRE_REGISTRY__}function W(){var e=S(),t=k(),i=t[e];return i||(t[e]=Object.create(null),i=t[e]),i}!function(){var e=j();e.__rewire_reset_all__||(e.__rewire_reset_all__=function(){e.__$$GLOBAL_REWIRE_REGISTRY__=Object.create(null)})}();var P="__INTENTIONAL_UNDEFINED__",X={};function Y(e){var t=W();if(void 0===t[e])return function(e){switch(e){case"GameOfLife":return w;case"constants":return l;case"init":return F}}(e);var i=t[e];return i===P?void 0:i}function U(e,i){var n=W();return"object"===t(e)?(Object.keys(e).forEach((function(t){n[t]=e[t]})),function(){Object.keys(e).forEach((function(t){V(e)}))}):(n[e]=void 0===i?P:i,function(){V(e)})}function V(e){var t=W();delete t[e],0==Object.keys(t).length&&delete k()[S]}function H(e){var t=W(),i=Object.keys(e),n={};function r(){i.forEach((function(e){t[e]=n[e]}))}return function(l){i.forEach((function(i){n[i]=t[i],t[i]=e[i]}));var a=l();return a&&"function"==typeof a.then?a.then(r).catch(r):r(),a}}!function(){function e(e,t){Object.defineProperty(X,e,{value:t,enumerable:!1,configurable:!0})}e("__get__",Y),e("__GetDependency__",Y),e("__Rewire__",U),e("__set__",U),e("__reset__",V),e("__ResetDependency__",V),e("__with__",H)}();var x=t(F);function J(e,t){Object.defineProperty(F,e,{value:t,enumerable:!1,configurable:!0})}"object"!==x&&"function"!==x||!Object.isExtensible(F)||(J("__get__",Y),J("__GetDependency__",Y),J("__Rewire__",U),J("__set__",U),J("__reset__",V),J("__ResetDependency__",V),J("__with__",H),J("__RewireAPI__",X))}();